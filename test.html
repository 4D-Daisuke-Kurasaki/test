<!doctype html>
<html lang="ja">
  <head>
    <meta charSet="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      #bk {
        /*
        left:0;
        top:0;
        width: 100%;
        height: 100%;
        position: absolute;
        z-index: 99999999999999999;
        display: none;
        */
      }
    </style>
  </head>
  <body>
                <div id="bk">bk</div>
                <p class="TestClassP" id="title">1面目</p><label class="TestClassLabel" id="test"><input type="file" accept="image/png, image/jpeg" name="test" class="testClassInput" />
  </body>


  <script>
    const test = document.getElementById("test");
    const bk = document.getElementById("bk");
    bk.style.backgroundColor = "aqua";
    // alert("aed");
    // nevigator.mediaDevices.getUserMedia({video: true, audio: false});

    /*
    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {
      alert("enumerateDevices() not supported.");
    return;
}
*/
var constraints = { audio: true, video: { width: 1280, height: 720 } };

/*
navigator.mediaDevices.getUserMedia(constraints)
.then((stream) => {
  alert("success");
  stream.getTracks().forEach(track => track.stop());
  var video = document.querySelector('video');
  video.srcObject = mediaStream;
  video.onloadedmetadata = function(e) {
    // video.play();
  };
})
.catch(function(err) { alert("error"); console.log(err.name + ": " + err.message); }); // always check
*/

/*
    navigator.mediaDevices.enumerateDevices().then(() => {
      nevigator.mediaDevices.getUserMedia({video: true, audio: false})
      .then(stream => {
        console.log("success");
        alert("成功だよ");
        stream.getTracks().forEach(track => track.stop());
      })
      .catch(err => {
        console.log("error");
        alert("エラーだよ");
      });
    }).catch(err => {
      console.log("dame")
      alert("だめだよ");
    });
    */

    bk.addEventListener("click", (value) => {
      // alert("bl");
      console.log(value);
      value.target.style.display = "block";
    });

    document.getElementById("test").addEventListener("click", (value) => {
      // document.getElementById("bk").style.display = "block";
      // alert("ここここ");
      navigator.mediaDevices.getUserMedia(constraints)
.then((stream) => {
  alert("success");
  stream.getTracks().forEach(track => track.stop());
  var video = document.querySelector('video');
  video.srcObject = mediaStream;
  video.onloadedmetadata = function(e) {
    // video.play();
  };
})
.catch(function(err) { alert("error"); console.log(err.name + ": " + err.message); }); // always check
    });
    document.getElementById("bk").addEventListener("click", (value) => {
      // document.getElementById("bk").style.display = "none";
    }); 

    test.addEventListener("click", value => {
      // alert("test");
      bk.style.color = "#4040FF";
      setTimeout(() => {
        console.log("aaa");
      }, "40000");
      /*
      navigator.mediaDevices.getUserMedia({ video: true, audio: true })
        .then(stream => {
          // ...
          alert("success!");
          console.log("success!");
        })
        .catch(err => {
          // ...
          alert("error!");
          console.log("error!");
        });
        */
      console.log(value);
    });
  </script>
</html>